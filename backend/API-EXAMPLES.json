// Exemplos de JSON para testes da API
// Baseado no Diagrama de Sequência: Fluxo Completo de Avaliação

// ==================== 1. CREATE EVALUATION ====================
POST /evaluations
{
  "title": "Team Performance Q1 2025",
  "description": "Evaluate overall team performance in Q1",
  "scale_type": "Likert",
  "category_id": null
}

Response 201:
{
  "id": "550e8400-e29b-41d4-a716-446655440001",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "category_id": null,
  "title": "Team Performance Q1 2025",
  "description": "Evaluate overall team performance in Q1",
  "status": "Draft",
  "scale_type": "Likert",
  "created_at": "2026-02-04T10:00:00Z",
  "updated_at": "2026-02-04T10:00:00Z",
  "published_at": null,
  "closed_at": null
}


// ==================== 2. UPDATE EVALUATION ====================
PATCH /evaluations/550e8400-e29b-41d4-a716-446655440001
{
  "title": "Team Performance Q1 2025 - Final",
  "description": "Comprehensive evaluation",
  "items": [
    {
      "order": 1,
      "text": "Team communication is clear and effective",
      "metadata": {}
    },
    {
      "order": 2,
      "text": "Technical knowledge meets project requirements",
      "metadata": {}
    },
    {
      "order": 3,
      "text": "Collaboration and teamwork is strong",
      "metadata": {}
    }
  ]
}

Response 200:
{
  "id": "550e8400-e29b-41d4-a716-446655440001",
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "category_id": null,
  "title": "Team Performance Q1 2025 - Final",
  "description": "Comprehensive evaluation",
  "status": "Draft",
  "scale_type": "Likert",
  "created_at": "2026-02-04T10:00:00Z",
  "updated_at": "2026-02-04T10:05:00Z",
  "published_at": null,
  "closed_at": null
}


// ==================== 3. AI GENERATION ====================
POST /evaluations/generate
{
  "description": "Evaluate team member's communication, technical skills, project delivery, and collaboration abilities",
  "scale_type": "Likert"
}

Response 200:
{
  "items": [
    {
      "order": 1,
      "text": "Communicates ideas clearly and effectively",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    },
    {
      "order": 2,
      "text": "Demonstrates strong technical knowledge",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    },
    {
      "order": 3,
      "text": "Delivers projects on time and to specification",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    },
    {
      "order": 4,
      "text": "Collaborates well with team members",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    },
    {
      "order": 5,
      "text": "Takes initiative and shows leadership",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    }
  ],
  "scale_type": "Likert"
}


// ==================== 4. VALIDATE ITEMS ====================
POST /evaluations/validate
{
  "items": [
    {
      "order": 1,
      "text": "Communicates ideas clearly",
      "metadata": {}
    },
    {
      "order": 2,
      "text": "Technical knowledge is strong",
      "metadata": {}
    }
  ],
  "scale_type": "Likert"
}

Response 200:
{
  "is_valid": true,
  "errors": []
}


// ==================== 5. PUBLISH EVALUATION ====================
POST /evaluations/550e8400-e29b-41d4-a716-446655440001/publish
{
  "items": [
    {
      "order": 1,
      "text": "Team communication is clear and effective",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    },
    {
      "order": 2,
      "text": "Technical knowledge meets project requirements",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    },
    {
      "order": 3,
      "text": "Collaboration and teamwork is strong",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    }
  ]
}

Response 200:
{
  "evaluation_id": "550e8400-e29b-41d4-a716-446655440001",
  "status": "Open",
  "public_link": "/public/eval/a1b2c3d4-e5f6-47g8-h9i0-j1k2l3m4n5o6",
  "short_url": "eval-abc12345"
}


// ==================== 6. GET PUBLIC EVALUATION ====================
GET /public/eval/a1b2c3d4-e5f6-47g8-h9i0-j1k2l3m4n5o6

Response 200:
{
  "id": "550e8400-e29b-41d4-a716-446655440001",
  "title": "Team Performance Q1 2025 - Final",
  "description": "Comprehensive evaluation",
  "scale_type": "Likert",
  "questions": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440011",
      "order": 1,
      "text": "Team communication is clear and effective",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440012",
      "order": 2,
      "text": "Technical knowledge meets project requirements",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440013",
      "order": 3,
      "text": "Collaboration and teamwork is strong",
      "metadata": {
        "min_value": 1,
        "max_value": 5,
        "labels": ["Strongly Disagree", "Disagree", "Neutral", "Agree", "Strongly Agree"]
      }
    }
  ]
}


// ==================== 7. GET PUBLIC STATS ====================
GET /public/eval/a1b2c3d4-e5f6-47g8-h9i0-j1k2l3m4n5o6/stats

Response 200:
{
  "evaluation_id": "550e8400-e29b-41d4-a716-446655440001",
  "total_responses": 5,
  "response_rate": 83.33
}


// ==================== 8. SUBMIT RESPONSES ====================
POST /responses
{
  "respondent_id": "hash-ip-12345abcde",
  "answers": [
    {
      "question_id": "550e8400-e29b-41d4-a716-446655440011",
      "answer_value": 4
    },
    {
      "question_id": "550e8400-e29b-41d4-a716-446655440012",
      "answer_value": 5
    },
    {
      "question_id": "550e8400-e29b-41d4-a716-446655440013",
      "answer_value": 4
    }
  ]
}

Response 201:
{
  "message": "✓ Obrigado por responder",
  "response_count": 5
}


// ==================== 9. GET RESPONSE STATS ====================
GET /evaluations/550e8400-e29b-41d4-a716-446655440001/stats

Response 200:
{
  "total_responses": 5,
  "total_questions": 3,
  "response_rate": 100.0
}


// ==================== 10. CLOSE EVALUATION ====================
POST /evaluations/550e8400-e29b-41d4-a716-446655440001/close

Response 200:
{
  "status": "closed",
  "evaluation_id": "550e8400-e29b-41d4-a716-446655440001",
  "message": "Evaluation closed. Analytics processing started."
}


// ==================== 11. PROCESS ANALYTICS ====================
POST /evaluations/550e8400-e29b-41d4-a716-446655440001/process

Response 200:
{
  "evaluation_id": "550e8400-e29b-41d4-a716-446655440001",
  "total_responses": 5,
  "response_rate": 100.0,
  "metrics": {
    "by_question": [
      {
        "question_id": "550e8400-e29b-41d4-a716-446655440011",
        "question_text": "Team communication is clear and effective",
        "statistics": {
          "mean": 4.2,
          "median": 4.0,
          "std_dev": 0.8366,
          "min": 3.0,
          "max": 5.0,
          "distribution": {
            "3": 1,
            "4": 2,
            "5": 2
          },
          "confidence_score": 0.95
        }
      },
      {
        "question_id": "550e8400-e29b-41d4-a716-446655440012",
        "question_text": "Technical knowledge meets project requirements",
        "statistics": {
          "mean": 4.6,
          "median": 5.0,
          "std_dev": 0.5477,
          "min": 4.0,
          "max": 5.0,
          "distribution": {
            "4": 2,
            "5": 3
          },
          "confidence_score": 0.95
        }
      },
      {
        "question_id": "550e8400-e29b-41d4-a716-446655440013",
        "question_text": "Collaboration and teamwork is strong",
        "statistics": {
          "mean": 4.4,
          "median": 4.0,
          "std_dev": 0.8944,
          "min": 3.0,
          "max": 5.0,
          "distribution": {
            "3": 1,
            "4": 2,
            "5": 2
          },
          "confidence_score": 0.95
        }
      }
    ],
    "summary": {
      "total_questions": 3,
      "total_responses": 5
    }
  },
  "generated_at": "2026-02-04T10:30:00Z"
}


// ==================== 12. GET RESULTS ====================
GET /evaluations/550e8400-e29b-41d4-a716-446655440001/results

Response 200:
{
  "evaluation_id": "550e8400-e29b-41d4-a716-446655440001",
  "metrics": {
    "by_question": [
      {
        "question_id": "550e8400-e29b-41d4-a716-446655440011",
        "question_text": "Team communication is clear and effective",
        "statistics": {
          "mean": 4.2,
          "median": 4.0,
          "std_dev": 0.8366,
          "min": 3.0,
          "max": 5.0,
          "distribution": {
            "3": 1,
            "4": 2,
            "5": 2
          },
          "confidence_score": 0.95
        }
      }
    ],
    "summary": {
      "total_questions": 3,
      "total_responses": 5
    }
  }
}


// ==================== 13. LIST EVALUATIONS ====================
GET /evaluations

Response 200:
{
  "total": 3,
  "is_first_time": false,
  "evaluations": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "user_id": "550e8400-e29b-41d4-a716-446655440000",
      "title": "Team Performance Q1 2025",
      "status": "Closed",
      "created_at": "2026-02-04T09:00:00Z",
      "published_at": "2026-02-04T10:00:00Z",
      "closed_at": "2026-02-04T10:30:00Z"
    }
  ]
}


// ==================== VALIDATION ERRORS ====================

// Fixed Sum Validation Error
POST /responses
{
  "respondent_id": "hash-ip-12345",
  "answers": [
    {"question_id": "q1", "answer_value": 40},
    {"question_id": "q2", "answer_value": 30},
    {"question_id": "q3", "answer_value": 20}  // Total = 90, not 100
  ]
}

Response 400:
{
  "error": "Validation error: Fixed sum must equal 100, got 90"
}


// Likert Range Validation Error
POST /responses
{
  "respondent_id": "hash-ip-12345",
  "answers": [
    {"question_id": "q1", "answer_value": 6}  // Invalid: must be 1-5
  ]
}

Response 400:
{
  "error": "Validation error: Likert scale must be 1-5"
}


// Item Validation - Missing Required Field
POST /evaluations/validate
{
  "items": [
    {
      "order": 1,
      // Missing "text" field
      "metadata": {}
    }
  ],
  "scale_type": "Likert"
}

Response 400:
{
  "is_valid": false,
  "errors": ["Empty item text"]
}
